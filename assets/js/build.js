!function(t){function i(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}var e={};return i.m=t,i.c=e,i.p="",i(0)}([function(t,i,e){var n=e(2),o=e(1),a=e(3);Pikatime=function(t,i){this.options=n.extend({color:"white",background:"black",highlight:"#8dae28",face:"12"},i),this.state={time:a.from24(15,0),pointerLocation:o.fromCart(0,0),focused:!1},this.inputElement=t,this.initDom(),this.dom.canvas.height=325,this.dom.canvas.width=250;var s=e(5)("./"+this.options.face+"/face.js");this.clockFace=new s(this.dom.ctx,this.options),n.on("timeChange",function(t){this.state.time=t}.bind(this)),this.render()},Pikatime.prototype.initDom=function(){var t=document.createElement("div"),i=document.createElement("canvas"),e=document.createElement("div"),n=document.createElement("button"),o=document.createElement("button");t.appendChild(i),t.appendChild(e),e.appendChild(n),e.appendChild(o),t.setAttribute("class","pikatime-container"),o.setAttribute("tabindex","-1"),n.setAttribute("tabindex","-1"),o.innerText="OK",n.innerText="Cancel",o.addEventListener("click",this.save.bind(this)),n.addEventListener("click",this.hide.bind(this)),document.addEventListener("mousedown",this.handleInteractionStart.bind(this)),document.addEventListener("mousemove",this.handleInteractionMove.bind(this)),document.addEventListener("mouseup",this.handleInteractionEnd.bind(this)),document.addEventListener("touchstart",this.handleInteractionStart.bind(this)),document.addEventListener("touchmove",this.handleInteractionMove.bind(this)),document.addEventListener("touchend",this.handleInteractionEnd.bind(this)),t.style.display="none",document.body.appendChild(t),this.dom={container:t,canvas:i,ctx:i.getContext("2d"),buttonContainer:e,cancelButton:n,okButton:o}},Pikatime.prototype.render=function(){if("block"===this.dom.container.style.display){var t=this.dom.ctx,i=this.dom.canvas;t.fillStyle=this.options.background,t.fillRect(0,0,i.width,i.height),t.save(),t.translate(i.width/2,i.height/2),this.clockFace.render(this.state.time,this.state.pointerLocation),t.restore()}window.requestAnimationFrame(this.render.bind(this))},Pikatime.prototype.show=function(t){var i=/([0-9]+)(:)([0-9]+)/.exec(this.inputElement.value);i?this.state.time=a.from24(parseInt(i[1],10),parseInt(i[3],10)):this.state.time=a.from24(0,0),this.dom.container.style.display="block";var e=this.inputElement.getBoundingClientRect(),s=this.dom.container.getBoundingClientRect(),r={top:e.bottom+window.scrollY+12,left:e.left},h=r.top+s.height,c=window.innerHeight+window.scrollY;h>c-12?(r.top-=h-c,r.top-=12,this.dom.container.classList.add("pikatime-container-no-arrow")):this.dom.container.classList.remove("pikatime-container-no-arrow"),this.dom.container.style.left=r.left+"px",this.dom.container.style.top=r.top+"px";var l=this.dom.canvas.getBoundingClientRect();this.canvasCenter=o.fromCart(l.left+this.dom.canvas.width/2,l.top+this.dom.canvas.height/2),this.state.focused=!0,n.trigger("controlOpen")},Pikatime.prototype.hide=function(){this.dom.container.style.display="none",this.state.focused=!1,this.inputElement.focus()},Pikatime.prototype.save=function(t){this.inputElement.value=n.padLeft(this.state.time.hour,2)+":"+n.padLeft(this.state.time.minute,2),this.hide(),this.inputElement.focus()},Pikatime.prototype.handleInteractionStart=function(t){this.state.focused?t.target===this.dom.canvas?(t.preventDefault(),t.stopPropagation(),this.state.pointerLocation=o.subtract(o.fromEvent(t),this.canvasCenter),n.trigger("interactionStart",this.state.pointerLocation,this.state.time)):t.target!==this.dom.okButton&&t.target!==this.dom.cancelButton&&this.hide():t.target===this.inputElement&&("undefined"!=typeof t.changedTouches&&(t.preventDefault(),t.stopPropagation()),this.show(t))},Pikatime.prototype.handleInteractionMove=function(t){this.state.focused&&t.target===this.dom.canvas&&(t.preventDefault(),t.stopPropagation(),this.state.pointerLocation=o.subtract(o.fromEvent(t),this.canvasCenter))},Pikatime.prototype.handleInteractionEnd=function(t){this.state.focused&&(this.state.pointerLocation=o.subtract(o.fromEvent(t),this.canvasCenter),n.trigger("interactionEnd",this.state.pointerLocation,this.state.time))},"undefined"!=typeof jQuery&&(jQuery.fn.pikatime=function(){return this.each(function(){return $element=jQuery(this),$element.data("pikatime")||$element.data("pikatime",new Pikatime(this,{face:$element.attr("data-mode")})),$element.data("pikatime")})})},function(t,i,e){var n=e(4),o={};t.exports=o,o.fromCart=function(t,i){return{x:t,y:i,theta:n.atan2(i,t),radius:Math.sqrt(t*t+i*i)}},o.fromPolar=function(t,i){return{x:n.cos(t)*i,y:n.sin(t)*i,theta:t,radius:i}},o.fromEvent=function(t){var i,e;return"undefined"!=typeof t.changedTouches?(i=t.changedTouches[0].clientX,e=t.changedTouches[0].clientY):(i=t.clientX,e=t.clientY),o.fromCart(i,e)},o.subtract=function(t,i){return o.fromCart(t.x-i.x,t.y-i.y)},o.add=function(t,i){return o.fromCart(t.x+i.x,t.y+i.y)}},function(t,i,e){var n=e(1),o=e(4),a={};t.exports=a,a.extend=function(){for(var t={},i=0;i<arguments.length;i++)for(var e in arguments[i])arguments[i].hasOwnProperty(e)&&(t[e]=arguments[i][e]);return t},a.intersects=function(t,i,e){return t.x>i.x-e&&t.x<i.x+e&&t.y>i.y-e&&t.y<i.y+e},a.cubicEase=function(t){return 1>t/.5?t*t/.5:-((t-.5)*(t-2)-.5)},a.padLeft=function(t,i,e){return e=e||"0",t+="",t.length>=i?t:new Array(i-t.length+1).join(e)+t},a.circleIterate=function(t,i,e){for(var a=2*Math.PI/i,s=0;i>s;s++){var r=o.cos(a*s)*t,h=o.sin(a*s)*t;e(n.fromCart(r,h),s)}},a.events={},a.on=function(t,i){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(i)},a.trigger=function(t){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof this.events[t]&&this.events[t].forEach(function(t){t.apply(null,i)})}},function(t,i){var e={};t.exports=e,e.from12=function(t,i,e){return{hour:"am"===e?t:t+12,minute:i,hour12:t,period:e}},e.from24=function(t,i){return{hour:t,minute:i,hour12:12>t?t:t-12,period:12>t?"am":"pm"}},e.getHourAngle=function(t){var i=t.hour/12*Math.PI*2;return i>Math.PI&&(i-=2*Math.PI),i},e.getMinuteAngle=function(t){var i=t.minute/60*Math.PI*2;return i>Math.PI&&(i-=2*Math.PI),i},e.minuteFromAngle=function(t){0>t&&(t+=2*Math.PI);var i=t/(2*Math.PI),e=5*Math.round(60*i/5);return 60===e&&(e=0),e},e.hourFromAngle=function(t){0>t&&(t+=2*Math.PI);var i=t/(2*Math.PI),e=Math.round(12*i);return 12===e&&(e=0),e}},function(t,i){var e={};t.exports=e,e.sin=function(t){return Math.sin(t-Math.PI/2)},e.cos=function(t){return Math.cos(t-Math.PI/2)},e.atan2=function(t,i){return Math.atan2(t,i)+Math.PI/2}},function(t,i,e){function n(t){return e(o(t))}function o(t){return a[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var a={"./12/face.js":6,"./24/face.js":9};n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id=5},function(t,i,e){var n=e(2),o=e(1),a=function(t,i){this.canvas=t.canvas,this.ctx=t,this.options=n.extend({font:"12px Arial",timeFont:"24px Arial",faceRadius:70,selectorRadius:15,timeY:-120,amLocation:o.fromCart(-50,110),pmLocation:o.fromCart(50,110)},i),this.state={animation:0,isAnimating:!1,interval:"hour",dragging:!1},n.on("interactionStart",this.handleInteractionStart.bind(this)),n.on("interactionEnd",this.handleInteractionEnd.bind(this)),n.on("controlOpen",this.handleControlOpen.bind(this))};a.prototype.handleControlOpen=function(){this.state.interval="hour"},a.prototype.setInterval=function(t){this.state.interval!==t&&(this.state.isAnimating=!0)},a.prototype.calculateTimeMetrics=function(t){var i=this.ctx;i.font=this.options.timeFont;var e=n.padLeft(0===t.hour?12:t.hour,2),a=n.padLeft(t.minute,2),s=t.period,r=i.measureText(e).width,h=i.measureText(":").width,c=i.measureText(a).width,l=i.measureText(s).width,u=r+h+c+l,d=-(u/2),f=d+r,m=f+h,p=m+c;return{totalWidth:u,hourWidth:r,colonWidth:h,minuteWidth:c,periodWidth:l,hour:o.fromCart(d,this.options.timeY),colon:o.fromCart(f,this.options.timeY),minute:o.fromCart(m,this.options.timeY),period:o.fromCart(p,this.options.timeY)}},a.prototype=n.extend(a.prototype,e(8),e(7)),t.exports=a},function(t,i,e){var n=e(2),o=e(1),a=e(3),s=function(t,i){var e="hour"===this.state.interval?a.getHourAngle(i):a.getMinuteAngle(i),s=o.fromPolar(e,this.options.faceRadius);n.intersects(t,s,this.options.selectorRadius)&&(this.state.dragging=!0)},r=function(t,i){this.state.dragging===!0?this.handleDragEnd(t,i):(this.handleFaceInteract(t,i),this.handlePeriodInteract(t,i),this.handleDisplayInteract(t,i))},h=function(t,i){var e;"hour"===this.state.interval?(e=a.from12(a.hourFromAngle(t.theta),i.minute,i.period),this.setInterval("minute")):e=a.from24(i.hour,a.minuteFromAngle(t.theta)),n.trigger("timeChange",e),this.state.dragging=!1},c=function(t,i){var e=this.options.faceRadius-this.options.selectorRadius/2,o=this.options.faceRadius+this.options.selectorRadius/2;if(t.radius>e&&t.radius<o){var s;"hour"===this.state.interval?(s=a.from12(a.hourFromAngle(t.theta),i.minute,i.period),this.setInterval("minute")):s=a.from24(i.hour,a.minuteFromAngle(t.theta)),n.trigger("timeChange",s)}},l=function(t,i){n.intersects(t,this.options.amLocation,2*this.options.selectorRadius)&&n.trigger("timeChange",a.from12(i.hour12,i.minute,"am")),n.intersects(t,this.options.pmLocation,2*this.options.selectorRadius)&&n.trigger("timeChange",a.from12(i.hour12,i.minute,"pm"))},u=function(t,i){var e=this.calculateTimeMetrics(i),a=o.add(e.hour,o.fromCart(e.hourWidth/2,0));n.intersects(t,a,e.hourWidth/2)&&this.setInterval("hour");var s=o.add(e.minute,o.fromCart(e.minuteWidth/2,0));n.intersects(t,s,e.minuteWidth/2)&&this.setInterval("minute")};t.exports={handleInteractionStart:s,handleInteractionEnd:r,handleDragEnd:h,handleFaceInteract:c,handlePeriodInteract:l,handleDisplayInteract:u}},function(t,i,e){var n=e(2),o=e(1),a=e(3),s=function(t,i){this.renderTimeDisplay(t,i),this.renderPeriodToggle(t,i),this.state.isAnimating?this.renderAnimation(t,i):(this.renderArm(t,i,this.state.interval),"hour"===this.state.interval?this.renderHourFace(t,i):this.renderMinuteFace(t,i))},r=function(t,i){this.state.animation+=.04;var e=n.cubicEase(this.state.animation),o=.3*e;this.ctx.save(),this.ctx.scale(1+o,1+o),this.ctx.globalAlpha=1-e>0?1-e:0,this.renderArm(t,i,this.state.interval),"hour"===this.state.interval?this.renderHourFace(t,i):this.renderMinuteFace(t,i),this.ctx.restore(),this.ctx.save(),this.ctx.scale(.7+o,.7+o),this.ctx.globalAlpha=e,this.renderArm(t,i,"hour"===this.state.interval?"minute":"hour"),"hour"===this.state.interval?this.renderMinuteFace(t,i):this.renderHourFace(t,i),this.ctx.restore(),this.state.animation>=1&&(this.state.isAnimating=!1,this.state.animation=0,this.state.interval="hour"===this.state.interval?"minute":"hour")},h=function(t,i,e){var n,s=this.ctx;if(this.state.dragging)n=o.fromPolar(i.theta,this.options.faceRadius);else{var r;r="hour"===e?a.getHourAngle(t):a.getMinuteAngle(t),n=o.fromPolar(r,this.options.faceRadius)}s.strokeStyle=this.options.highlight,s.beginPath(),s.moveTo(0,0),s.lineTo(n.x,n.y),s.stroke(),s.fillStyle=this.options.highlight,s.beginPath(),s.arc(n.x,n.y,this.options.selectorRadius,0,2*Math.PI),s.fill(),s.fillStyle=this.options.color,s.beginPath(),s.arc(0,0,1,0,2*Math.PI),s.fill()},c=function(t,i){var e=this.ctx;n.circleIterate(this.options.faceRadius,12,function(t,i){e.fillStyle=this.options.color,e.textAlign="center",e.textBaseline="middle",e.font=this.options.font;var n=0===i?12:i;e.fillText(n,t.x,t.y)}.bind(this))},l=function(t,i){var e=this.ctx;n.circleIterate(this.options.faceRadius,12,function(t,i){e.fillStyle=this.options.color,e.textAlign="center",e.textBaseline="middle",e.font=this.options.font;var o=n.padLeft(5*i,2,0);e.fillText(o,t.x,t.y)}.bind(this))},u=function(t,i){var e=this.ctx,n=this.options.amLocation,o=this.options.pmLocation;e.fillStyle=this.options.highlight,e.beginPath(),"am"===t.period?e.arc(n.x,n.y,this.options.selectorRadius,0,2*Math.PI):e.arc(o.x,o.y,this.options.selectorRadius,0,2*Math.PI),e.fill(),e.fillStyle=this.options.color,e.font=this.options.font,e.textAlign="center",e.textBaseline="middle",e.fillText("am",n.x,n.y),e.fillText("pm",o.x,o.y)},d=function(t,i){var e=this.ctx;e.textAlign="left",e.textBaseline="middle",e.font=this.options.timeFont;var o=n.padLeft(0===t.hour12?12:t.hour12,2),a=n.padLeft(t.minute,2),s=t.period,r=this.calculateTimeMetrics(t);e.fillStyle="hour"===this.state.interval?this.options.highlight:this.options.color,e.fillText(o,r.hour.x,r.hour.y),e.fillStyle=this.options.color,e.fillText(":",r.colon.x,r.colon.y),e.fillStyle="minute"===this.state.interval?this.options.highlight:this.options.color,e.fillText(a,r.minute.x,r.minute.y),e.fillStyle=this.options.color,e.fillText(s,r.period.x,r.period.y)};t.exports={render:s,renderAnimation:r,renderHourFace:c,renderArm:h,renderMinuteFace:l,renderPeriodToggle:u,renderTimeDisplay:d}},function(t,i,e){var n=e(2),o=e(1),a=function(t,i){this.ctx=t,this.canvas=t.canvas,this.state={interval:"hour",dragging:!1,interacting:!1,animating:!1,animationState:0},this.options=n.extend({selectorRadius:15,face24Radius:90,face12Radius:60,minuteRadius:75,faceLocation:o.fromCart(0,20),timeLocation:o.fromCart(0,-135),font:"12px Arial",timeFont:"24px Arial"},i),n.on("interactionStart",this.handleInteractStart.bind(this)),n.on("interactionEnd",this.handleInteractEnd.bind(this)),n.on("controlOpen",this.handleControlOpen.bind(this))};a.prototype.handleControlOpen=function(){this.state.interval="hour"},a.prototype.changeInterval=function(t){this.state.interval!==t&&(this.state.animating=!0)},a.prototype=n.extend(a.prototype,e(10),e(11)),t.exports=a},function(t,i,e){var n=e(2),o=e(3),a=e(1),s=function(t,i){var e;if("hour"===this.state.interval){var s=o.getHourAngle(i),r=i.hour<12?this.options.face12Radius:this.options.face24Radius;e=a.fromPolar(s,r),e=a.add(e,this.options.faceLocation)}else{var s=o.getMinuteAngle(i);e=a.fromPolar(s,this.options.minuteRadius),e=a.add(e,this.options.faceLocation)}n.intersects(t,e,this.options.selectorRadius)?this.state.dragging=!0:this.state.interacting=!0},r=function(t,i){t=a.subtract(t,this.options.faceLocation),this.state.dragging?h.call(this,t,i):this.state.interacting&&c.call(this,t,i),this.state.dragging=!1},h=function(t,i){var e;if("hour"===this.state.interval){var a=o.hourFromAngle(t.theta),s=(this.options.face12Radius+this.options.face24Radius)/2;t.radius>s&&(a+=12),e=o.from24(a,i.minute),this.changeInterval("minute")}else{var r=o.minuteFromAngle(t.theta);e=o.from24(i.hour,r)}n.trigger("timeChange",e)},c=function(t,i){if("hour"===this.state.interval){var e=this.options.face12Radius-this.options.selectorRadius,s=(this.options.face12Radius+this.options.face24Radius)/2,r=this.options.face24Radius+this.options.selectorRadius;if(t.radius>e&&t.radius<s){var h=o.hourFromAngle(t.theta);n.trigger("timeChange",o.from24(h,i.minute)),this.changeInterval("minute")}else if(t.radius>s&&t.radius<r){var h=o.hourFromAngle(t.theta)+12;n.trigger("timeChange",o.from24(h,i.minute)),this.changeInterval("minute")}}else{var c=this.options.minuteRadius-this.options.selectorRadius,l=this.options.minuteRadius+this.options.selectorRadius;if(t.radius>c&&t.radius<l){var u=o.minuteFromAngle(t.theta);n.trigger("timeChange",o.from24(i.hour,u))}}var d=this.calculateTimeMetrics(i),f=a.add(d.hour,a.fromCart(d.hourWidth/2,0)),m=a.add(d.minute,a.fromCart(d.minuteWidth/2,0));n.intersects(f,t,d.hourWidth/2)&&this.changeInterval("hour"),n.intersects(m,t,d.minuteWidth/2)&&this.changeInterval("minute")};t.exports={handleInteractStart:s,handleInteractEnd:r}},function(t,i,e){var n=e(2),o=e(1),a=e(3),s=function(t,i){this.renderTimeDisplay(t,i),this.state.animating?this.renderAnimation(t,i):(this.renderClockSelector(t,i,this.state.interval),"hour"===this.state.interval?this.renderHourFace(t,i):this.renderMinuteFace(t,i))},r=function(t,i){var e=this.ctx;this.state.animationState+=.05;var o=n.cubicEase(this.state.animationState),a=.3*o;e.save(),e.scale(1+a,1+a),e.globalAlpha=1-o>0?1-o:0,this.renderClockSelector(t,i,this.state.interval),"hour"===this.state.interval?this.renderHourFace(t,i):this.renderMinuteFace(t,i),e.restore(),e.save(),e.scale(.7+a,.7+a),e.globalAlpha=o,this.renderClockSelector(t,i,"hour"===this.state.interval?"minute":"hour"),"hour"===this.state.interval?this.renderMinuteFace(t,i):this.renderHourFace(t,i),e.restore(),this.state.animationState>=1&&(this.state.animating=!1,this.state.animationState=0,this.state.interval="hour"===this.state.interval?"minute":"hour")},h=function(t,i,e){var n=this.ctx;n.fillStyle=this.options.highlight,n.strokeStyle=this.options.highlight,n.save(),n.translate(this.options.faceLocation.x,this.options.faceLocation.y);var s;if(this.state.dragging)if(i=o.subtract(i,this.options.faceLocation),"hour"===e){var r=(this.options.face12Radius+this.options.face24Radius)/2,h=i.radius>r?this.options.face24Radius:this.options.face12Radius;s=o.fromPolar(i.theta,h)}else s=o.fromPolar(i.theta,this.options.minuteRadius);else if("hour"===e){var h=t.hour<12?this.options.face12Radius:this.options.face24Radius;s=o.fromPolar(a.getHourAngle(t),h)}else s=o.fromPolar(a.getMinuteAngle(t),this.options.minuteRadius);n.beginPath(),n.arc(s.x,s.y,this.options.selectorRadius,0,2*Math.PI),n.fill(),n.beginPath(),n.moveTo(0,0),n.lineTo(s.x,s.y),n.stroke(),n.fillStyle=this.options.color,n.beginPath(),n.arc(0,0,1,0,2*Math.PI),n.fill(),n.restore()},c=function(t,i){var e=this.ctx;e.fillStyle=this.options.color,e.font=this.options.font,e.textAlign="center",e.textBaseline="middle",e.save(),e.translate(this.options.faceLocation.x,this.options.faceLocation.y),n.circleIterate(this.options.face12Radius,12,function(t,i){e.fillText(i,t.x,t.y)}),n.circleIterate(this.options.face24Radius,12,function(t,i){i+=12,e.fillText(i,t.x,t.y)}),e.restore()},l=function(t,i){var e=this.ctx;e.fillStyle=this.options.color,e.textAlign="center",e.textBaseline="middle",e.font=this.options.font,e.save(),e.translate(this.options.faceLocation.x,this.options.faceLocation.y),n.circleIterate(this.options.minuteRadius,12,function(t,i){var o=5*i;e.fillText(n.padLeft(o,2,0),t.x,t.y)}),e.restore()},u=function(t,i){var e=this.ctx;e.textAlign="left",e.textBaseline="top",e.font=this.options.timeFont;var o=n.padLeft(t.hour,2),a=n.padLeft(t.minute,2),s=this.calculateTimeMetrics(t);e.fillStyle="hour"===this.state.interval?this.options.highlight:this.options.color,e.fillText(o,s.hour.x,s.hour.y),e.fillStyle=this.options.color,e.fillText(":",s.colon.x,s.colon.y),e.fillStyle="minute"===this.state.interval?this.options.highlight:this.options.color,e.fillText(a,s.minute.x,s.minute.y)},d=function(t){var i=this.ctx;i.font=this.options.timeFont;var e=n.padLeft(t.hour,2),a=n.padLeft(t.minute,2),s=i.measureText(e).width,r=i.measureText(":").width,h=i.measureText(a).width,c=s+r+h,l=this.options.timeLocation.x-c/2,u=l+s,d=u+r;return{hourWidth:s,colonWidth:r,minuteWidth:h,totalWidth:c,hour:o.fromCart(l,this.options.timeLocation.y),colon:o.fromCart(u,this.options.timeLocation.y),minute:o.fromCart(d,this.options.timeLocation.y)}};t.exports={render:s,renderAnimation:r,renderTimeDisplay:u,renderMinuteFace:l,renderHourFace:c,renderClockSelector:h,calculateTimeMetrics:d}}]);